(this["webpackJsonpmovie-db"]=this["webpackJsonpmovie-db"]||[]).push([[0],{23:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(13),s=n.n(i),a=n(11),o=n(2),l=n(38),u=(n(23),n(0)),d=function(e){var t=e.movie,n=e.changeSelectedMovie;return Object(u.jsx)("div",{className:"col-3 my-3 movie-card-container",children:Object(u.jsxs)("div",{className:"movie-card",style:{backgroundImage:"url(".concat(t.cover,")")},onClick:function(){return function(e){n(e),window.scrollTo(0,0)}(t.id)},children:[Object(u.jsx)("div",{className:"col-12 d-flex justify-content-center align-items-center movie-card-info",children:Object(u.jsx)("span",{className:"p-3",children:t.title})}),Object(u.jsx)("div",{className:"movie-card-overlay"})]})})},j=(n(25),function(e){var t=e.genre,n=e.setMovieGenre;return Object(u.jsx)("button",{className:"py-1 px-2 genre",onClick:function(){return n(t.id)},children:t.name})}),h=function(){return Object(u.jsx)("div",{className:"container-fluid",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col d-flex justify-content-center align-items-center",style:{height:"100vh"},children:Object(u.jsx)("i",{className:"fas fa-circle-notch fa-2x fa-spin",style:{color:"white"}})})})})},f=(n(26),n(3)),b=n.n(f),v=n(7),m=n(14),O=n(15),p="https://ec-guifoes.com/imdb-api/",x=function(e){return"?".concat(Object.entries(e).filter((function(e){return![null,void 0,""].includes(e[1])})).map((function(e){return e.join("=")})).join("&"))},g=function(e){return e.ok?e:e.json().then((function(t){var n=t.error.message||e.statusText;throw new Error(n)}))},w=function(){function e(){Object(m.a)(this,e)}return Object(O.a)(e,null,[{key:"makeRequest",value:function(){var e=Object(v.a)(b.a.mark((function e(t){var n,c,r,i,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"GET",c=s.length>2&&void 0!==s[2]?s[2]:null,r={method:n,headers:{Accept:"application/json"}},null!==c&&(r.body=c),i=fetch(t,r),e.abrupt("return",i.then(g).then((function(e){return e.json()})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMovies",value:function(){var e=Object(v.a)(b.a.mark((function e(){var t,n,c=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:null,n=c.length>1?c[1]:void 0,t||(t="".concat(p,"movies/").concat(x(n))),e.abrupt("return",this.makeRequest(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMovieDetail",value:function(){var e=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.makeRequest("".concat(p,"movies/").concat(t,"/")));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),y=w,N=function(e){console.log(e)},k=function(){var e=function(e){var t={};return e.replace("?","").split("&").forEach((function(e){var n=e.split("=");n[1]&&(t[n[0]]=n[1])})),t}(Object(l.a)().search),t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],i=n[1],s=Object(c.useState)([]),f=Object(o.a)(s,2),b=f[0],v=f[1],m=Object(c.useState)(null),O=Object(o.a)(m,2),p=O[0],g=O[1],w=Object(c.useState)(e.search),k=Object(o.a)(w,2),S=k[0],E=k[1],M=Object(c.useState)(!0),C=Object(o.a)(M,2),T=C[0],q=C[1],R=Object(c.useState)(!1),G=Object(o.a)(R,2),H=G[0],I=G[1],L=Object(c.useState)(e.genre),D=Object(o.a)(L,2),J=D[0],_=D[1],A=Object(c.useState)(!0),B=Object(o.a)(A,2),Y=B[0],z=B[1],F=Object(c.useState)(null),K=Object(o.a)(F,2),P=K[0],Q=K[1],U=Object(c.useRef)(null);Object(c.useEffect)((function(){J&&X(!0)}),[J]);var V=function(e){_(e),window.history.replaceState({},null,x({search:S,genre:e}))},W=function(){window.scrollY>document.querySelector(".header").offsetHeight-100?z(!1):z(!0),window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight&&(console.log("next",P),X())};Object(c.useEffect)((function(){return window.addEventListener("scroll",W),X(!0),function(){window.removeEventListener("scroll",W)}}),[]),Object(c.useEffect)((function(){(""===S||S&&S.length>2)&&X(!0)}),[S]);var X=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||P)&&y.getMovies(e?null:P,{search:S,genre:J}).then((function(t){v(e?t.results:[].concat(Object(a.a)(b),Object(a.a)(t.results))),Q(t.next),t.previous||(0!==t.results.length?Z(t.results[0].id):(g(null),q(!1)))})).catch(N)},Z=function(e){y.getMovieDetail(e).then((function(e){g(e),T&&q(!1)}))};return T?Object(u.jsx)(h,{}):Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsxs)("div",{className:"search-container",style:H?{display:"none"}:{display:"initial"},children:[Object(u.jsx)("input",{type:"text",placeholder:"Search",className:"search-input ".concat(r&&"show-search-input"),onChange:function(e){return function(e){E(e.target.value),window.history.replaceState({},null,x({search:e.target.value,genre:J}))}(e)},value:S,ref:U}),Object(u.jsx)("i",{className:"fas fa-search search-button",onClick:function(){return i(!r),void U.current.focus()}})]}),p&&Object(u.jsxs)("div",{className:"row justify-content-center align-content-center header ".concat(H&&"full-height-detail"),children:[Object(u.jsxs)("div",{className:"col-6 p-0 movie-info-container",children:[Object(u.jsxs)("div",{className:"movie-info",children:[Object(u.jsx)("h1",{children:p.title}),Object(u.jsx)("h5",{children:p.year}),Object(u.jsx)("span",{children:p.synopsis}),Object(u.jsxs)("div",{className:"row align-items-center my-3",children:[Object(u.jsx)("div",{className:"col-9",children:p.genres.map((function(e){return Object(u.jsx)(j,{genre:e,setMovieGenre:V},e.id)}))}),Object(u.jsxs)("div",{className:"col-3 d-flex justify-content-end align-items-center",children:[Object(u.jsxs)("span",{className:"movie-score",children:[p.score,"/10"]}),Object(u.jsx)("a",{href:"https://www.imdb.com/title/".concat(p.external_id),target:"_blank",rel:"noreferrer",children:Object(u.jsx)("i",{className:"fab fa-imdb imdb-icon"})})]})]})]}),Object(u.jsx)("i",{className:"fas fa-chevron-down fa-2x detail-button ".concat(H&&"arrow-up"),style:Y?{display:"block"}:{display:"none"},onClick:function(){return I(!H)}})]}),Object(u.jsx)("div",{className:"movie-bg",style:{backgroundImage:"url(".concat(p.cover,")")},children:Object(u.jsx)("div",{className:"movie-bg-overlay"})})]}),Object(u.jsx)("div",{className:"row justify-content-center movie-list-container ".concat(H&&"hide-list"),onTransitionEnd:function(e){e.target.className.includes("movie-list-container")&&(e.target.className+=" d-none")},children:Object(u.jsx)("div",{className:"col-6",children:Object(u.jsx)("div",{className:"row my-3",children:0===b.length?Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col d-flex justify-content-center align-items-center",style:{height:"100vh"},children:Object(u.jsx)("span",{style:{color:"white"},children:"No results"})})}):b.map((function(e){return Object(u.jsx)(d,{movie:e,changeSelectedMovie:Z},e.id)}))})})}),Object(u.jsx)("button",{onClick:function(){return X()},children:"Load more"})]})},S=function(){return Object(u.jsx)(k,{})};n(36);s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(S,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.6315ad93.chunk.js.map