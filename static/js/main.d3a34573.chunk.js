(this["webpackJsonpmovie-db"]=this["webpackJsonpmovie-db"]||[]).push([[0],{26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),i=n(17),s=n.n(i),a=n(13),o=n(2),l=n(16),u=n(5),j=(n(26),n(1)),d=function(e){var t=e.movie,n=e.changeSelectedMovie;return Object(j.jsx)("div",{className:"col-3 my-3 movie-card-container",children:Object(j.jsxs)("div",{className:"movie-card",style:{backgroundImage:"url(".concat(t.cover,")")},onClick:function(){return function(e){n(e),window.scrollTo(0,0)}(t.id)},children:[Object(j.jsx)("div",{className:"col-12 d-flex justify-content-center align-items-center movie-card-info",children:Object(j.jsx)("span",{className:"p-3",children:t.title})}),Object(j.jsx)("div",{className:"movie-card-overlay"})]})})},h=(n(28),function(e){var t=e.genre,n=e.setMovieGenre;return Object(j.jsx)("button",{className:"py-1 px-2 genre",onClick:function(){return n(t.id)},children:t.name})}),f=function(){return Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col d-flex justify-content-center align-items-center",style:{height:"100vh"},children:Object(j.jsx)("i",{className:"fas fa-circle-notch fa-2x fa-spin",style:{color:"white"}})})})})},b=(n(29),n(6)),m=n.n(b),v=n(10),O=n(18),p=n(19),x="https://ec-guifoes.com/imdb-api/",g=function(e){return"?".concat(Object.entries(e).filter((function(e){return![null,void 0,""].includes(e[1])})).map((function(e){return e.join("=")})).join("&"))},w=function(e){return e.ok?e:e.json().then((function(t){var n=t.error.message||e.statusText;throw new Error(n)}))},y=function(){function e(){Object(O.a)(this,e)}return Object(p.a)(e,null,[{key:"makeRequest",value:function(){var e=Object(v.a)(m.a.mark((function e(t){var n,c,r,i,s=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"GET",c=s.length>2&&void 0!==s[2]?s[2]:null,r={method:n,headers:{Accept:"application/json"}},null!==c&&(r.body=c),i=fetch(t,r),e.abrupt("return",i.then(w).then((function(e){return e.json()})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMovies",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t,n,c=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:null,n=c.length>1?c[1]:void 0,t||(t="".concat(x,"movies/").concat(g(n))),e.abrupt("return",this.makeRequest(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMovieDetail",value:function(){var e=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.makeRequest("".concat(x,"movies/").concat(t,"/")));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),N=y,k=function(e){console.log(e)},S=function(){var e=function(e){var t={};return e.replace("?","").split("&").forEach((function(e){var n=e.split("=");n[1]&&(t[n[0]]=n[1])})),t}(Object(o.f)().search),t=Object(c.useState)(!1),n=Object(u.a)(t,2),r=n[0],i=n[1],s=Object(c.useState)([]),a=Object(u.a)(s,2),b=a[0],m=a[1],v=Object(c.useState)(null),O=Object(u.a)(v,2),p=O[0],x=O[1],w=Object(c.useState)(e.search),y=Object(u.a)(w,2),S=y[0],E=y[1],M=Object(c.useState)(!0),C=Object(u.a)(M,2),T=C[0],q=C[1],R=Object(c.useState)(!1),G=Object(u.a)(R,2),H=G[0],I=G[1],L=Object(c.useState)(e.genre),D=Object(u.a)(L,2),J=D[0],_=D[1],A=Object(c.useState)(!0),B=Object(u.a)(A,2),Y=B[0],z=B[1],F=Object(c.useState)(null),K=Object(u.a)(F,2),P=K[0],Q=K[1],U=Object(c.useRef)(null);Object(c.useEffect)((function(){J&&X(!0)}),[J]);var V=function(e){_(e),window.history.replaceState({},null,g({search:S,genre:e}))},W=function(){window.scrollY>document.querySelector(".header").offsetHeight-100?z(!1):z(!0),window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight&&(console.log("next",P),X())};Object(c.useEffect)((function(){return window.addEventListener("scroll",W),X(!0),function(){window.removeEventListener("scroll",W)}}),[]),Object(c.useEffect)((function(){(""===S||S&&S.length>2)&&X(!0)}),[S]);var X=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||P)&&N.getMovies(e?null:P,{search:S,genre:J}).then((function(t){m(e?t.results:[].concat(Object(l.a)(b),Object(l.a)(t.results))),Q(t.next),t.previous||(0!==t.results.length?Z(t.results[0].id):(x(null),q(!1)))})).catch(k)},Z=function(e){N.getMovieDetail(e).then((function(e){x(e),T&&q(!1)}))};return T?Object(j.jsx)(f,{}):Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsxs)("div",{className:"search-container",style:H?{display:"none"}:{display:"initial"},children:[Object(j.jsx)("input",{type:"text",placeholder:"Search",className:"search-input ".concat(r&&"show-search-input"),onChange:function(e){return function(e){E(e.target.value),window.history.replaceState({},null,g({search:e.target.value,genre:J}))}(e)},value:S,ref:U}),Object(j.jsx)("i",{className:"fas fa-search search-button",onClick:function(){return i(!r),void U.current.focus()}})]}),p&&Object(j.jsxs)("div",{className:"row justify-content-center align-content-center header ".concat(H&&"full-height-detail"),children:[Object(j.jsxs)("div",{className:"col-6 p-0 movie-info-container",children:[Object(j.jsxs)("div",{className:"movie-info",children:[Object(j.jsx)("h1",{children:p.title}),Object(j.jsx)("h5",{children:p.year}),Object(j.jsx)("span",{children:p.synopsis}),Object(j.jsxs)("div",{className:"row align-items-center my-3",children:[Object(j.jsx)("div",{className:"col-9",children:p.genres.map((function(e){return Object(j.jsx)(h,{genre:e,setMovieGenre:V},e.id)}))}),Object(j.jsxs)("div",{className:"col-3 d-flex justify-content-end align-items-center",children:[Object(j.jsxs)("span",{className:"movie-score",children:[p.score,"/10"]}),Object(j.jsx)("a",{href:"https://www.imdb.com/title/".concat(p.external_id),target:"_blank",rel:"noreferrer",children:Object(j.jsx)("i",{className:"fab fa-imdb imdb-icon"})})]})]})]}),Object(j.jsx)("i",{className:"fas fa-chevron-down fa-2x detail-button ".concat(H&&"arrow-up"),style:Y?{display:"block"}:{display:"none"},onClick:function(){return I(!H)}})]}),Object(j.jsx)("div",{className:"movie-bg",style:{backgroundImage:"url(".concat(p.cover,")")},children:Object(j.jsx)("div",{className:"movie-bg-overlay"})})]}),Object(j.jsx)("div",{className:"row justify-content-center movie-list-container ".concat(H&&"hide-list"),onTransitionEnd:function(e){e.target.className.includes("movie-list-container")&&(e.target.className+=" d-none")},children:Object(j.jsx)("div",{className:"col-6",children:Object(j.jsx)("div",{className:"row my-3",children:0===b.length?Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col d-flex justify-content-center align-items-center",style:{height:"100vh"},children:Object(j.jsx)("span",{style:{color:"white"},children:"No results"})})}):b.map((function(e){return Object(j.jsx)(d,{movie:e,changeSelectedMovie:Z},e.id)}))})})}),Object(j.jsx)("button",{onClick:function(){return X()},children:"Load more"})]})},E=function(){return Object(j.jsx)(a.a,{children:Object(j.jsxs)(o.c,{children:[Object(j.jsx)(o.a,{exact:!0,path:"/imdb-app",component:S}),Object(j.jsx)(o.a,{path:"*",children:Object(j.jsx)(f,{})})]})})};n(39);s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(E,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.d3a34573.chunk.js.map